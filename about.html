<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title></title>
    <meta name="keywords" content=""/>
    <meta name="description" content=""/>
    <link href="css/bootstrap.min.css" rel="stylesheet"/>
    <link href="css/global.css" rel="stylesheet"/>

    <link href="css/index.css" rel="stylesheet"/>
    <style></style>
</head>
<body>
<div id="app">

    <div id="header"></div>
    <div class="neibanner" style="background:url(images/banner_about.jpg) no-repeat 50%; background-size: cover;"></div>
    <div class="neipagename">
        <div class="pagename_en">
            {{curContent.enName}}
        </div>
        <br/>
        <div class="pagename_ch">
            <div>
                {{curContent.cnName}}
            </div>
        </div>
    </div>
    <div class="neimenu">
        <div>
            <a
                    @click="handleTabs(item)"
                    v-for="item in tabs" :key="item.id" :class="{'active':(selectedTitleId==item.id)}">{{item.categoryName}}</a>
        </div>
    </div>
    <div class="about">
        <div v-html="curContent.content">
        </div>
    </div>
    <div id="footer"></div>
</div>
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
<script src="js/vue.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/bootstrap.js"></script>
<!--<script src="js/npm.js"></script>-->
<script src="js/global.js"></script>
<script src="js/http.js"></script>
<script src="js/common.js"></script>
<script>
    loadHeaderFooter(getVue)

    function getVue(){
        var app = new Vue({
            el: '#app',
            data: function () {
                return {
                    pageName: 'about',
                    // index:{},
                    listCarousel: [],
                    listAdvantage: [],
                    listColumn: [],
                    listProduct: [],
                    webcompany: {},
                    about: '',
                    newsIndices: [{
                        list:[]
                    }],
                    selectedNews:0,

                    selectedTitleId:"",
                    tabs:[],
                    curContent:{}
                }
            },
            computed: {
                pxbXun: function () {
                    return {
                        width: (this.listProduct.length * 283 + "px")
                    }
                },
                newsItems1:function () {
                    return this.newsIndices[this.selectedNews].list.slice(0 )
                },
                newsItems2:function () {
                    return this.newsIndices[this.selectedNews].list.slice(2)
                }
            },
            mounted() {
                var self = this;
                getIndex().then(function (data){
                    console.log("load data jquery:"  ,data)

                    self.index = data;
                    self.listCarousel = self.index.listCarousel;
                    self.listAdvantage = self.index.listAdvantage;
                    self.listProduct = self.index.listProduct;
                    self.listColumn = self.index.listColumn;
                    self.webcompany = self.index.webcompany;
                    self.about = self.index.about;
                    self.newsIndices = self.index.newsIndices;

                    setTimeout(function () {
                        loadBootstrap()
                    }, 300)
                })

                var id = getParameterByName("id")
                var columnId = getParameterByName("columnId")
                // var selectedTitleId = getParameterByName("sub")
                this.selectedTitleId = columnId
                this.id = id

                this.getKideDes()


            },
            /*
            *  {
  "message": "string",
  "path": "string",
  "rows": {
    "cnName": "string",
    "content": "string",
    "enName": "string",
    "list": [
      {
        "categoryName": "string",
        "categoryState": 0,
        "children": [
          {}
        ],
        "enName": "string",
        "id": 0,
        "parentId": 0,
        "state": 0
      }
    ],
    "nowColumn": "string",
    "nowColumnId": "string"
  },
  "status": "string"
}


            * */
            methods: {
                getKideDes:function(){
                    console.log("getKideDes")
                    var self = this
                    getKideDes(this.id , this.selectedTitleId).then(function (data) {
                        self.tabs = data.list
                        self.curContent = data

                    })
                },
                handleTabs:function( item){
                    console.log("e :" , item)

                    this.selectedTitleId = item.id
                    this.getKideDes()
                },
                handleSubMenu:function(item , sub){
                    handleSubMenu(item , sub)
                }
            }

        })
    }
    /*
    * content (string, optional): 内容 ,
contenttype (string, optional): 1 富文本 3产品 4资料下载 5新闻 ,
coverImg (string, optional): 封面 ,
createTime (string, optional): 时间 ,
field (string, optional),
id (integer, optional): 主键 ,
isDel (integer, optional),
sort (integer, optional),
subTitle (string, optional): 副标题 ,
title (string, optional): 标题 ,
type (integer, optional),
typeName (string, optional)
}
    * */
</script>
</body>
</html>
